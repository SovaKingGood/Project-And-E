# Stack overflow fix - Add these to your sdkconfig

# Increase main task stack size (currently 3584, needs more for Bluetooth + Display)
CONFIG_ESP_MAIN_TASK_STACK_SIZE=8192
CONFIG_MAIN_TASK_STACK_SIZE=8192

# Bluetooth optimizations - use PSRAM where possible
CONFIG_BT_ALLOCATION_FROM_SPIRAM_FIRST=y
CONFIG_BT_BLE_DYNAMIC_ENV_MEMORY=y

# LVGL optimizations for PSRAM
CONFIG_LV_MEM_CUSTOM=y
CONFIG_LV_MEM_CUSTOM_ALLOC=heap_caps_malloc
CONFIG_LV_MEM_CUSTOM_FREE=heap_caps_free
CONFIG_LV_MEM_CUSTOM_INCLUDE="esp_heap_caps.h"

# Task stack sizes - increase critical ones
CONFIG_ESP_TIMER_TASK_STACK_SIZE=4096
CONFIG_TIMER_TASK_STACK_SIZE=4096

# Bluetooth task stack sizes (if available)
CONFIG_BTDM_CTRL_HCI_MODE_VHCI=y
CONFIG_BTDM_CTRL_MODE_BLE_ONLY=n
CONFIG_BTDM_CTRL_MODE_BR_EDR_ONLY=n
CONFIG_BTDM_CTRL_MODE_BTDM=y
